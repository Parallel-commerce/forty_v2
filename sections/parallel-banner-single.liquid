{%- comment -%}
  Description: This section displays a single banner image with an optional link. The image can be square or portrait and will adjust to the screen size. The banner height can be adjusted to control the aspect ratio.
{%- endcomment -%}
{{ 'section-parallel-banner-single.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-margin {
    margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ section.settings.margin_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-margin {
      margin-top: {{ section.settings.margin_top }}px;
      margin-bottom: {{ section.settings.margin_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="isolate{% unless section.settings.full_width %} page-width{% endunless %}">
  <div class="parallel-banner-single content-container color-{{ section.settings.color_scheme }} gradient{% if section.settings.full_width %} parallel-banner-single--full-width content-container--full-width{% endif %} section-{{ section.id }}-margin">
    <div class="parallel-banner-single__wrapper{% unless section.settings.full_width %} page-width{% endunless %}">
      {%- if section.settings.image != blank -%}
        {%- if section.settings.banner_link != blank -%}
          <a href="{{ section.settings.banner_link }}" class="parallel-banner-single__link">
        {%- endif -%}
        
        <div class="parallel-banner-single__image{% if section.settings.mobile_image != blank %} parallel-banner-single__image--{{ section.settings.mobile_aspect_ratio }}{% endif %}" style="height: {{ section.settings.banner_height }}vh;">
          {%- if section.settings.mobile_image != blank -%}
            <img src="{{ section.settings.mobile_image | image_url: width: 800 }}" 
                 alt="{{ section.settings.mobile_image.alt | escape }}" 
                 class="parallel-banner-single__mobile-image"
                 width="800" height="600"
                 loading="lazy">
            <img src="{{ section.settings.image | image_url: width: 2400 }}" 
                 alt="{{ section.settings.image.alt | escape }}" 
                 class="parallel-banner-single__desktop-image"
                 width="2400" height="1800"
                 loading="lazy">
          {%- else -%}
            {{ section.settings.image | image_url: width: 2400 | image_tag: loading: 'lazy', alt: section.settings.image.alt | escape }}
          {%- endif -%}
        </div>
        
        {%- if section.settings.banner_link != blank -%}
          </a>
        {%- endif -%}
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Parallel Banner Single",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Banner Image"
    },
    {
      "type": "url",
      "id": "banner_link",
      "label": "Banner Link (optional)"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image (optional)"
    },
    {
      "type": "select",
      "id": "mobile_aspect_ratio",
      "options": [
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "portrait",
          "label": "Portrait"
        }
      ],
      "default": "square",
      "label": "Mobile Image Aspect Ratio"
    },
    {
      "type": "range",
      "id": "banner_height",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "vh",
      "label": "Banner height",
      "default": 50
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "Full width"
    },
    {
      "type": "header",
      "content": "Margin"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin top",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin bottom",
      "default": 52
    }
  ],
  "presets": [
    {
      "name": "|| Banner Single"
    }
  ]
}
{% endschema %}